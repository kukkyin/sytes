<!DOCTYPE html>
<html>
<head>
  <title>ｱｱｱｱｱｱ</title>
  <meta charset="UTF-8">
  <style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f0f0f0;
  }

  canvas {
    display: block;
    margin: 20px auto;
    border: 2px solid #000;
    background-color: #fff;
    cursor: crosshair;
  }

  .tools {
    text-align: center;
    margin-bottom: 20px;
  }

  .tools button {
    margin: 5px;
    padding: 5px 10px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    background-color: #007bff;
    color: #fff;
  }

  .tools button:hover {
    background-color: #0056b3;
  }

  .tools label {
    margin-right: 10px;
  }

  .tools input[type="color"] {
    margin-right: 10px;
    cursor: pointer;
  }

  .tools input[type="number"] {
    width: 50px;
  }

  .download-link {
    text-align: center;
    margin-top: 20px;
  }
</style>
</head>
<body>
  <h1>このサイトはRenderで運用しています。</h1>
  <p>なんだこのサイト  とりあえずペイントツールを張っときます</p>
   <canvas id="canvas" width="800" height="600"></canvas>
  <div class="tools">
    <label for="colorPicker">Color:</label>
    <input type="color" id="colorPicker" value="#000000">
    <label for="penWidth">Pen Width:</label>
    <input type="number" id="penWidth" value="5" min="1" max="50">
    <button onclick="changeTool('pen')">Pen</button>
    <button onclick="changeTool('line')">Line</button>
    <button onclick="changeTool('circle')">Circle</button>
    <button onclick="changeTool('rectangle')">Rectangle</button>
    <button onclick="clearCanvas()">Clear</button>
  </div>
  <div class="download-link">
    <button onclick="downloadDrawing()">Download Drawing</button>
  </div>
   <script>
    const canvas = document.getElementById('canvas');
    const context = canvas.getContext('2d');
    let isDrawing = false;
    let lastX = 0;
    let lastY = 0;
    let tool = 'pen';
    let color = '#000000';
    let penWidth = 5;

    function draw(x, y) {
      switch (tool) {
        case 'pen':
          drawPen(x, y);
          break;
        case 'line':
          drawLine(x, y);
          break;
        case 'circle':
          drawCircle(x, y);
          break;
        case 'rectangle':
          drawRectangle(x, y);
          break;
        default:
          break;
      }
    }

    function drawPen(x, y) {
      if (!isDrawing) return;
      context.strokeStyle = color;
      context.lineJoin = 'round';
      context.lineWidth = penWidth;
      context.beginPath();
      context.moveTo(lastX, lastY);
      context.lineTo(x, y);
      context.closePath();
      context.stroke();
      [lastX, lastY] = [x, y];
    }

    function drawLine(x, y) {
      context.strokeStyle = color;
      context.lineWidth = penWidth;
      context.beginPath();
      context.moveTo(lastX, lastY);
      context.lineTo(x, y);
      context.closePath();
      context.stroke();
    }

    function drawCircle(x, y) {
      const radius = Math.sqrt(Math.pow(x - lastX, 2) + Math.pow(y - lastY, 2));
      context.strokeStyle = color;
      context.lineWidth = penWidth;
      context.beginPath();
      context.arc(lastX, lastY, radius, 0, Math.PI * 2);
      context.stroke();
    }

    function drawRectangle(x, y) {
      context.strokeStyle = color;
      context.lineWidth = penWidth;
      context.beginPath();
      context.rect(lastX, lastY, x - lastX, y - lastY);
      context.stroke();
    }

    function changeTool(selectedTool) {
      tool = selectedTool;
    }

    function clearCanvas() {
      context.clearRect(0, 0, canvas.width, canvas.height);
    }

    function handleStart(event) {
      isDrawing = true;
      [lastX, lastY] = [event.touches[0].pageX - canvas.offsetLeft, event.touches[0].pageY - canvas.offsetTop];
    }

    function handleMove(event) {
      event.preventDefault();
      if (isDrawing) {
        let x = event.touches[0].pageX - canvas.offsetLeft;
        let y = event.touches[0].pageY - canvas.offsetTop;
        draw(x, y);
      }
    }

    function handleEnd(event) {
      isDrawing = false;
    }

    function downloadDrawing() {
      const dataURL = canvas.toDataURL('image/png');
      const downloadLink = document.createElement('a');
      downloadLink.href = dataURL;
      downloadLink.download = 'web-peint.png';
      document.body.appendChild(downloadLink);
      downloadLink.click();
      document.body.removeChild(downloadLink);
    }

    canvas.addEventListener('touchstart', handleStart, false);
    canvas.addEventListener('touchmove', handleMove, false);
    canvas.addEventListener('touchend', handleEnd, false);

    document.getElementById('colorPicker').addEventListener('change', (e) => {
      color = e.target.value;
    });

    document.getElementById('penWidth').addEventListener('change', (e) => {
      penWidth = parseInt(e.target.value);
    });
  </script>
</body>
</html>
